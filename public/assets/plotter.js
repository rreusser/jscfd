((function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};a=function(){function a(a){this.ctx=a,this.polyline=c(this.polyline,this),this.line=c(this.line,this),this.lineTo=c(this.lineTo,this),this.moveTo=c(this.moveTo,this),this.plot=c(this.plot,this),this.draw_ytics=c(this.draw_ytics,this),this.draw_xtics=c(this.draw_xtics,this),this.onetwofive=c(this.onetwofive,this),this.pos=c(this.pos,this),this.draw=c(this.draw,this),this.set_j_limits=c(this.set_j_limits,this),this.set_i_limits=c(this.set_i_limits,this),this.set_y_limits=c(this.set_y_limits,this),this.set_x_limits=c(this.set_x_limits,this)}return a.prototype.set_x_limits=function(a,b){return this.xmin=Math.min(a,b),this.xmax=Math.max(a,b)},a.prototype.set_y_limits=function(a,b){return this.ymin=Math.min(a,b),this.ymax=Math.max(a,b)},a.prototype.set_i_limits=function(a,b){return this.imin=Math.min(a,b),this.imax=Math.max(a,b)},a.prototype.set_j_limits=function(a,b){return this.jmin=Math.max(a,b),this.jmax=Math.min(a,b)},a.prototype.draw=function(){return this.ctx.lineStyle="#000000",this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(this.imin,this.jmax-10),this.ctx.lineTo(this.imin,this.jmin),this.ctx.lineTo(this.imax+10,this.jmin),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.imax+10,this.jmin-3),this.ctx.lineTo(this.imax+20,this.jmin),this.ctx.lineTo(this.imax+10,this.jmin+3),this.ctx.lineTo(this.imax+10,this.jmin-3),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(this.imin-3,this.jmax-10),this.ctx.lineTo(this.imin,this.jmax-20),this.ctx.lineTo(this.imin+3,this.jmax-10),this.ctx.lineTo(this.imin-3,this.jmax-10),this.ctx.fill(),this.draw_xtics(),this.draw_ytics()},a.prototype.pos=function(a,b){var c,d;return c=this.imin+a/(this.xmax-this.xmin)*(this.imax-this.imin),d=this.jmin+b/(this.ymax-this.ymin)*(this.jmax-this.jmin),[c,d]},a.prototype.onetwofive=function(a){var b,c,d,e,f,g,h,i;c=Math.pow(10,Math.floor(Math.log(a)/Math.log(10))),b=100,i=[.5,1,2,5,10,20];for(g=0,h=i.length;g<h;g++)d=i[g],f=Math.abs(a/c-d),f<b&&(b=f,e=d);return e*c},a.prototype.draw_xtics=function(){var a,b,c,d,e;this.ctx.lineStyle="#000000",d=this.onetwofive((this.xmax-this.xmin)/((this.imax-this.imin)/50)),c=this.xmin+d,a=1,e=[];while(c<this.xmax+d/2)this.ctx.beginPath(),b=this.pos(c,this.ymin),this.ctx.moveTo(b[0],b[1]),this.ctx.lineTo(b[0],b[1]-10),this.ctx.stroke(),a++,e.push(c=this.xmin+d*a);return e},a.prototype.draw_ytics=function(){var a,b,c,d,e;this.ctx.lineStyle="#000000",d=this.onetwofive((this.ymax-this.ymin)/((this.jmin-this.jmax)/50)),c=this.ymin+d,a=1,e=[];while(c<this.ymax+d/2)this.ctx.beginPath(),b=this.pos(this.xmin,c),this.ctx.moveTo(b[0],b[1]),this.ctx.lineTo(b[0]+10,b[1]),this.ctx.stroke(),a++,e.push(c=this.ymin+d*a);return e},a.prototype.plot=function(a){var b,c;return this.ctx.strokeStyle="#000000",c=[function(){var c,d;d=[];for(b=0,c=a.length;0<=c?b<c:b>c;0<=c?b++:b--)d.push(this.xmin+(this.xmax-this.xmin)*b/(a.length-1));return d}.call(this)][0],this.polyline(c,a)},a.prototype.moveTo=function(a){return this.ctx.moveTo(a[0],a[1])},a.prototype.lineTo=function(a){return this.ctx.lineTo(a[0],a[1])},a.prototype.line=function(a,b,c,d){return this.ctx.beginPath(),this.moveTo(this.pos(a,b)),this.lineTo(this.pos(c,d)),this.ctx.stroke()},a.prototype.polyline=function(a,b){var c,d;if(a.length!==b.length)return console.error("Polyline must have same number of points in x and y");this.ctx.lineStyle="#000000",this.ctx.beginPath(),this.moveTo(this.pos(a[0],b[0]));for(c=1,d=a.length;1<=d?c<d:c>d;1<=d?c++:c--)this.lineTo(this.pos(a[c],b[c]));return this.ctx.stroke()},a}(),b=function(){function b(a,b){this.id=a,this["var"]=b,this.resize=c(this.resize,this),this.set_padding=c(this.set_padding,this),this.draw=c(this.draw,this),this.register=c(this.register,this),this.canvas=document.getElementById(a),this.jcanvas=$("#"+this.id),this.ctx=this.canvas.getContext("2d"),this.set_padding(30),this.resize(),this.plotvars=[],this.plotvarnames=[]}return b.prototype.register=function(a){var b;console.log(a.name),console.log(this.plotvarnames);if(b=a.name,d.call(this.plotvarnames,b)<0)return this.plotvars.push(a),this.plotvarnames.push(a.name)},b.prototype.draw=function(){var a,b,c,d,e;this.ctx.clearRect(0,0,this.width,this.height),this.axis.draw(),d=this.plotvars,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.axis.plot(a));return e},b.prototype.set_padding=function(a){this.padding=a},b.prototype.resize=function(){return this.ctx=this.canvas.getContext("2d"),this.width=$("#"+this.id).parent().width(),this.height=$("#"+this.id).parent().height(),this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height,$("#"+this.id).width(this.width),$("#"+this.id).height(this.height),this.axis=new a(this.ctx),this.axis.set_x_limits(0,1),this.axis.set_y_limits(0,.2),this.axis.set_i_limits(this.padding,this.width-this.padding),this.axis.set_j_limits(this.height-this.padding,this.padding)},b}(),$(document).ready(function(){return window.Plotter=new b("canvas"),$(window).resize(function(){return window.Plotter.resize(),window.Plotter.draw()}),window.Plotter.draw()})})).call(this);